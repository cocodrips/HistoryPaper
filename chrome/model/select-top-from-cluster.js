// Generated by CoffeeScript 1.6.3
(function() {
  var Article;

  this.SelectTopFromCluster = (function() {
    function SelectTopFromCluster() {
      this.pickedUpDomain = [];
    }

    SelectTopFromCluster.prototype.getTopHistoryFromHistories = function(histories) {
      var article, articles, domainType, history, i, _i, _j, _len, _len1;
      if (histories.length < 1) {
        return '';
      }
      articles = [];
      i = 0;
      for (_i = 0, _len = histories.length; _i < _len; _i++) {
        history = histories[_i];
        articles[i++] = new Article(history, this.calcScore(history));
      }
      articles.sort(function(a, b) {
        if (a.score > b.score) {
          return -1;
        }
        if (a.score < b.score) {
          return 1;
        }
        return 0;
      });
      for (_j = 0, _len1 = articles.length; _j < _len1; _j++) {
        article = articles[_j];
        domainType = article.history.url.split("/")[2];
        if (domainType && !_.include(this.pickedUpDomain, domainType)) {
          this.pickedUpDomain.push(domainType);
          return article.history;
        }
      }
      return histories[0];
    };

    SelectTopFromCluster.prototype.calcScore = function(history) {
      return history.visitCount;
    };

    return SelectTopFromCluster;

  })();

  Article = (function() {
    function Article(history, socre) {
      this.history = history;
      this.socre = socre;
    }

    return Article;

  })();

}).call(this);
