// Generated by CoffeeScript 1.6.3
(function() {
  this.History = (function() {
    function History() {}

    History.prototype.changeDate = function(date, searchWord) {
      var end, jsonData, start,
        _this = this;
      if (searchWord == null) {
        searchWord = "";
      }
      start = Date.parse(date) - 86400000;
      end = Date.parse(date);
      jsonData = "";
      return chrome.history.search({
        "text": searchWord,
        "startTime": start,
        "endTime": end,
        "maxResults": 100
      }, function(array) {
        var clustering, histories;
        clustering = _this.clusteringHistories(array);
        histories = _this.selectTopHistoryFromEachCluster(clustering);
        return console.log(histories);
      });
    };

    History.prototype.clusteringHistories = function(array) {
      var clustering;
      clustering = new Clustering(array);
      clustering.clustering();
      return clustering;
    };

    History.prototype.selectTopHistoryFromEachCluster = function(clustering) {
      var cluster, histories, i, _i, _len, _ref;
      histories = [];
      _ref = clustering.clusters;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        cluster = _ref[i];
        histories[i] = this.selectTopHistory(clustering.getClusterHistories(i));
      }
      return histories;
    };

    History.prototype.selectTopHistory = function(clusterHistories) {
      var k, v;
      for (k in clusterHistories) {
        v = clusterHistories[k];
        return v;
      }
    };

    return History;

  })();

}).call(this);
