// Generated by CoffeeScript 1.6.3
(function() {
  this.History = (function() {
    function History() {}

    History.prototype.changeDate = function(date, searchWord) {
      var end, histories, jsonData, start,
        _this = this;
      if (searchWord == null) {
        searchWord = "";
      }
      start = Date.parse(date) - 86400000;
      end = Date.parse(date);
      jsonData = "";
      histories = [];
      return chrome.history.search({
        "text": searchWord,
        "startTime": start,
        "endTime": end,
        "maxResults": 1000
      }, function(array) {
        var a, contents, _i, _len;
        console.log(array.length);
        contents = null;
        for (_i = 0, _len = array.length; _i < _len; _i++) {
          a = array[_i];
          chrome.storage.local.get(a['url'], function(items) {
            return console.log(items);
          });
        }
        return $.ajax({
          type: 'post',
          url: 'http://127.0.0.1:8000/historypaper/receive/historyobj/',
          data: {
            "length": String(array.length),
            "data": array
          },
          success: function(data) {
            return console.log(data);
          },
          error: function(xhr, type) {
            return console.log('AjaxError:', xhr, type);
          }
        });
      });
    };

    return History;

  })();

}).call(this);
